# Data Science & Business Analytics intern at The Sparks Foundation
### Author: Jahanvi Gaur

#Task 3 :Exploratory Data Analysis - Retail(Level - Beginner)

##**In this task, we will perform 'Exploratory Data Analysis' on 'SampleSuperstore'dataset . As a business analysist , 
we will try to find out the weak areas where we can work to make it more profitable . Also , what all business problem can be derived by exploringthe data .** 

#Import libraries

import pandas as pd
import numpy as np
import seaborn as sns
import warnings
warnings.filterwarnings('ignore')
import matplotlib.pyplot as plt

# read dataset 'SampleSuperstore'

sample= pd.read_csv(r"C:\Users\DELL\Desktop\SampleSuperstore.csv")

# checking shape of dataset

sample.shape

# top 5 rows 

sample.head()

##Dataset Description
#Pandas describe():
##is used to view some basic statistical details like percentile, mean, std etc. of a data frame or a series of numeric value.

sample.describe()

# counting category

sample['Category'].value_counts()

#finding basic information

sample.info()

# checking for the duplicate data . if any then dropping those data

sample.duplicated().sum()

# dropping duplicate data

sample.drop_duplicates()

# drop irrelevant columns 

col=['Postal Code']
sampleSS= sample.drop(columns= col,axis =1)

# correlation between variables

sampleSS.corr()

# correlation between variables

sampleSS.cov()

# Load first 5 rows of sampleSS

sampleSS.head()

# visualizing Category and sub category using bar graph

plt.figure(figsize=(16,8))

plt.bar("Sub-Category","Category",data=sampleSS, color= 'pink')
plt.title('Category Vs Sub-Category',fontsize=20)
plt.xlabel('Sub-Category',fontsize=15)
plt.ylabel('Category ',fontsize=15)
plt.xticks(rotation=45)
plt.show()

# Histogram for discount , profit , Quality and sales

sampleSS.hist(bins=50,figsize=(20,15))
plt.show()

# Count the total repeatable states

sampleSS['State'].value_counts()

# now, ploting this state data in countplot

plt.figure(figsize=(16,16))

sns.countplot(x=sampleSS['State'])
plt.title("STATE")
plt.xticks(rotation=90)
plt.show()


# Analysis of Sub-Category

plt.figure(figsize=(12,10))
sampleSS['Sub-Category'].value_counts().plot.pie(autopct="%1.1f%%")
plt.show()

# Analysis for total Profit and sales based on Sub-Category

sampleSS.groupby('Sub-Category')['Profit','Sales'].agg(['sum']).plot.bar()
plt.title('TOTAL PROFIT AND SALES PER SUB-CATEGORY')
plt.show()

sns.set(style="whitegrid")
plt.figure(2,figsize=(16,8))

sns.barplot(x='Sub-Category',y='Profit',data=sample, palette='Spectral')
plt.suptitle('PIE CONSUMPTION PATTERN IN THE UNITED STATE',fontsize=20)

plt.show()

# Analysis based on Shipping mode

sns.countplot(x=sample['Ship Mode'])

# ploting pair plot for Sub-Category

figsize=(15,10)
sns.pairplot(sampleSS,hue='Sub-Category')
plt.show()

# Now, ploting line plot for discount and profit

plt.figure(figsize=(10,4))
sns.lineplot('Discount','Profit',data=sampleSS,color='y', label= 'Discount')
plt.legend()
plt.show()

#Plots the turnover generated by different product Categories and Sub-categoies for the list of given states.

def state_data_viewer(state):
    product_data=sampleSS.groupby(['State'])
    for state in states:
        data=product_data.get_group(state).groupby(['Category'])
        fig,ax=plt.subplots(1,3,figsize=(28,5))
        fig.suptitle(state,fontsize=14)
        ax_index=0
        for cat in ['Furniture','Office Supplies','Technology']:
            cat_data=data.get_group(cat).groupby(['Sub-Category']).sum()
            sns.barplot(x=cat_data.Profit,y=cat_data.index,ax=ax[ ax_index])
            ax[ ax_index].set_ylabel(cat)
            ax_index +=1
        fig.show()
        
states=['California','Washington','Mississippi','Arizona','Texas']
state_data_viewer(states)


##**From the above Data Visualization , we can see the states and the category where sales and profit are high or less,
we can improve in the those states by providing discounts in prefered range so that the company and consumer with both be in profit.
Here, while the superstore is incurring losses by providing discount on their products, they can't stop doing so. Most of the heavy discount are during festival , end-of-season and clearance sales which are necessary ,so that the store can make space in their warehouses for fresh stock.
Also , by incurring small losses , the company gains in the future by attracting more long term customers.
Therefore, the small losses from discounts are an essential part of company's businesses.**
